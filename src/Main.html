<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>281++ Logic Simulator</title>

    <!-- CSS/Stylesheets -->
    <link rel="stylesheet" href="window.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Custom Javascript -->
    <script src="js/workspace.js" type="text/javascript"></script>
    <script src="js/grid.js" type="text/javascript"></script>
    <script src="js/component.js" type="text/javascript"></script>

    <!-- P5*JS libs -->
    <script src="js/libs/p5.js" type="text/javascript"></script>
    <script src="js/libs/p5.dom.js" type="text/javascript"></script>


</head>
<body>
	<div id="mySidenav" class="sidenav">
  		<a href="javascript:void(0)" class="closebtn" id="nav" onclick="closeRightMenu()">&times;</a>
  		<button class="collapsible" id="nav">Inputs</button>
  		<div class="component-content" id="debug-content">
  			Input dump here
  		</div>
  		<button class="collapsible" id="nav">Outputs</button>
  		<div class="component-content" id="debug-content">
  			Output dump here
  		</div>
  		<button class="collapsible" id="nav">Registers</button>
  		<div class="component-content" id="debug-content">
  			Register dump here
  		</div>
  		<button class="collapsible" id="nav">Something</button>
  		<div class="component-content" id="debug-content">
  			Something else here probably
  		</div>
	</div>
	<div id="main-wrapper">
		<div class="component-panel">
			<div id="component-label">
				<h2>2 8 1 + +</h2>
			</div>
			<div id="components">
				<button class="collapsible" onclick="change('gatesarrow')">Gates <i id="gatesarrow" style="float: right">&#9662;</i></button>
				<div class="component-content">
					<input type="image" src="res/andgate_us.png" class="component-btn" id="andGate" alt="And Gate" onclick="selectComponent(this.id, component)"></input>
					<input type="image" src="res/orgate_us.png" class="component-btn" id="orGate" alt="Or Gate" onclick="selectComponent(this.id, component)"></input>
					<input type="image" src="res/xorgate_us.png" class="component-btn" id="xorGate" alt="Xor Gate" onclick="selectComponent(this.id, component)"></input>
					<input type="image" src="res/nandgate_us.png" class="component-btn" id="nandGate" alt="Nand Gate" onclick="selectComponent(this.id, component)">
					</input>
					<input type="image" src="res/norgate_us.png" class="component-btn" id="norGate" alt="Nor Gate" onclick="selectComponent(this.id, component)"></input>
					<input type="image" src="res/xnorgate_us.png" class="component-btn" id="xnorGate" alt="Xnor Gate" onclick="selectComponent(this.id, component)">
					</input>
				</div>
				
				<button class="collapsible" onclick="change('ioarrow')">IO<i id="ioarrow" style="float: right">&#9662;</i></button>
				<div class="component-content">
					<button class="component-btn">Input Switch</button>
					<button class="component-btn">Input Button</button>
					<button class="component-btn">Output LED</button>
					<button class="component-btn">7 Segment Display</button>
					<button class="component-btn">Clock</button>
				</div>
				
				<button class="collapsible" onclick="change('connarrow')">Connectors<i id="connarrow" style="float: right">&#9662;</i></button>
				<div class="component-content">
					<button class="component-btn">2 Way Connector</button>
					<button class="component-btn">4 Way Connector</button>
				</div>
				
				<button class="collapsible" onclick="change('muxdarrow')">Mux and Decoder<i id="muxdarrow" style="float: right">&#9662;</i></button>
				<div class="component-content">
					<button class="component-btn">2:1 Mux</button>
					<button class="component-btn">4:2 Mux</button>
					<button class="component-btn">8:3 Mux</button>
					<button class="component-btn">2:1 Decoder</button>
					<button class="component-btn">4:2 Decoder</button>
					<button class="component-btn">8:3 Decoder</button>
				</div>
				<button class="collapsible" onclick="change('customarrow')">Custom Components<i id="customarrow" style="float: right">&#9662;</i></button>
				<div class="component-content">
					<p>No custom components</p>
				</div>
			</div>
		</div>
		<div class="main-panel">
			<div id="toolbar">
				<button class="toolbar-btn"><scan>Start &#9655;</scan></button>
				<button class="toolbar-btn">Stop &#9633;</button>
				<button class="toolbar-btn" onclick="component=-1">Select &#8598;</button>
				<button class="toolbar-btn">Pan</button>
				<button class="toolbar-btn" id="debug-btn" onclick="openRightMenu()">Debug</button>
				<button class="toolbar-btn" onclick="window.open('https://github.com/trandrew1023/F18HackISU/blob/master/README.md')">Help</button>
			</div>
			<div id="workspacediv">
				<!-- sole purpose is to provide a container for the canvas in p5 -->
			</div>
		</div>
	</div>

<script>
var coll = document.getElementsByClassName("collapsible");
var tools = document.getElementsByClassName("toolbar-btn");
var comps = document.getElementsByClassName("component-btn");
var i;

for (i = 0; i < coll.length; i++) {
	coll[i].addEventListener("click", function() {
		this.classList.toggle("active");
		var content = this.nextElementSibling;
		if (content.style.display == "block") {
			content.style.display = "none";
		} else {
			content.style.display = "block";
		}
	});
}
for (i = 0; i < tools.length; i++) {
	tools[i].addEventListener("click", function() {
		var content = this.nextElementSibling;
		if (content.id != "debug-btn") {
			this.classList.toggle("active");
		}
	});
}
for (i = 0; i < comps.length; i++) {
	comps[i].addEventListener("click", function() {
		this.classList.toggle("active");
		if (this.src.endsWith("_us.png")) {
			let j;
			let comps = document.getElementsByClassName("component-btn");
			for (j = 0; j < comps.length; j++) {
				comps[j].src = comps[j].src = "res/" + comps[j].id.toLowerCase() + "_us.png";
			}
			this.src = "res/" + this.id.toLowerCase() + ".png";
		} else {
			this.src = "res/" + this.id.toLowerCase() + "_us.png";
		}
	});
}

function change(id) {
	if (document.getElementById(id).innerHTML == "▾") {
		document.getElementById(id).innerHTML = "▴";
	} else {
		document.getElementById(id).innerHTML = "▾";
	}
}
function openRightMenu() {
    document.getElementById("mySidenav").style.width = "300px";
}

function closeRightMenu() {
    document.getElementById("mySidenav").style.width = "0";
}

function selectComponent(id, old) {
	console.log(old);
	switch(id) {
		case "andGate":
			if (old == 0){
				component = -1;
				break;
			}
			component = 0;
			break;
		case "orGate":
			if (old == 1){
				component = -1;
				break;
			}
			component = 1
			break;
		case "xorGate":
			if (old == 2){
				component = -1;
				break;
			}
			component = 2
			break;
		case "nandGate":
			if (old == 3){
				component = -1;
				break;
			}
			component = 3;
			break;
		case "norGate":
			if (old == 4){
				component = -1;
				break;
			}
			component = 4;
			break;
		case "xnorGate":
			if (old == 5){
				component = -1;
				break;
			}
			component = 5;
			break;
		default:
			component = -1;
			break;
	}
}
document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
		let comps = document.getElementsByClassName("component-btn");
		for (i = 0; i < comps.length; i++) {
			if (comps[i].id != "") {
				document.getElementById(comps[i].id).src="res/" + comps[i].id.toLowerCase() + "_us.png";
			}
		}
        component = -1;
    }
};
</script>

</body>
</html>
 